/* eslint-disable prettier/prettier */

import hardhat from "hardhat"
const proof = "0x00000000000000000000000000000000000000000000000000000000000000008d2264fa219fdb40b2ee0d22088cfd6288ceed53d785bd3b92045ecbf1128bbfce8b27002d58a56ea49da88b9f2f40c5c1707d487cedcb3d1c1301108957a523000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000000000000000000000000ce0000000000000000000000000000000000000000000000000000000000000000600000000000000000000000000000000000000000000000000000000000000c000000000000000000000000000000000000000000000000000000000000003000000000000000000000000000000000000000000000000000000000000000540000000000000000000000000000000000000000000000000000000000000078000000000000000000000000000000000000000000000000000000000000009c00000000000000000000000000000000000000000000000000000000000000be00000000000000000000000000000000000000000000000000000000000000214f90211a0e1aa1538de15fee8fbec6777d8d5e9d65d1e060fd8dc040d68ea31efad3eb39aa05287ff209c82b2e0a740fd3982c237242f0fe1eb398988180b7e491c7329a2e7a059e4b35315eea107f328a1c6eb314454cfaabae0e1b4260ac4151588df2be3daa0372fd183d1745122ce61b6743e997936411f0ac0df8355013d43602240535004a0f6c40dee84f732a68e185f7f64f2391027eb6ebf487955e786d4f98ff4442caea088d5aa571004e2e27d611ebd041b6232195eac6094fe74d5511bcd040097bfe3a0f85d689c0b2a7f419624d51f1560b3348991da966d144ed781b68a80a3700d1da03153a85f779de65c0b4471958a3af1cb9de09b42e005d31ae599c9eb5cc154a7a0a09dd18e6e6bc67e7cc04d35732df7fa07a3c54f0dcd51fab20e22769bca8880a0c69c333d45b18cc3d8639eba6db19e41f68d020760de3efe7b5d12b2dbd2554da093afefb76492696942323ed7d4edbd3f005c516a043705a057eab6cf38706015a0048d0f68a45347442bc530e9e2a4c00efbe6f7aeccce3a5ee5b15f18748da056a058872c6315c0cc47b372d3b46c5b01874f7e7192bb3047e1abf40fe4c98d4a3ca03bc05d3f18c44295f35ff77e72312ea52f0739b6b7ce06eca337c19276856570a0b50d1beebfdf3cebe18d22ef91c8721559777f1b44daa20c605458f4a88d72d5a0e3d4e64d4582f2a5ebba2c20efc044e594837ca2193c3881ac9f23b59b1b2c36800000000000000000000000000000000000000000000000000000000000000000000000000000000000000214f90211a04d2d3acde5e73e71c054b1c299e0d4b652d3ed5ea59e13e4a10d8ebb622a37f8a00b73d7ef6f04cc2c4ea7d48f11b55604245a6edac69f8b39bf16a6473de68ef6a05e9a40fa87d4c13d64377d62e8d82e2e12f880460860b3f87973d5455726895ba0bdf32fa7dbc121632f0ace3d74aa75395b186591d201428e22f4a1853a9bf933a0df14bbaed7fc72d1064a4f4304e8932756b912c396789bb9f4a7e8f00ad766a7a098ef3223331d93b1b0f24d41bb7dfbbd21826bf9b88ff8d45c337b849e9480f3a0ac6c17cfbd89640d2e325a3bfb6fb72a46bd046c7598ef50e9ddf64f70c63ae5a090ef9f5f56e156d9ff46f3dbd18bd80b47eb2861b26d198ede41916620c71419a09cd5b5ad94ce49fa128daec1b352a368f347ccba29d34b78b50c509e7592bc9ca0cdd7b9ebeff6cccbaf9a60f675e13c1859169024c29aae0df5be45495e95df0ea0124369f6f1601ac83ea28008e4dfabce24c16ac7ec9ebdb9a93ccb2ebb668a1aa0c46e7a3d0605cc9fb75d4315a44124aa4319371aabc35352f51fc70743d0e71ba0ebabcbcf9ce3edf181b4a1c4d12d54527c82b93f389d67b0ad963c1277d97d5fa05fb80bdb0f96b9028867c00b7ddcab745d2e21e453ca2719b189d0d5dd8af250a0e798fafb662769064916ab0676b6ad799367f6aea27415e7885538446ea52e39a039c4eb5e88bd412b7853096381107ae4a4f00ede6f1e29b011564c847e8b7ecf800000000000000000000000000000000000000000000000000000000000000000000000000000000000000214f90211a0b2fbcf2edff8a96dd14ceaad33638dc75a25dc076af91a1560fc241699a56ea6a0a9ceb76a2b4f2309543944b62f7e75d2995e5c97042ce92eb1eda15bcd412116a0776aa21a0f797ade2d2ecdb909c10baba1fc5f28124c44d439b280c0cc6a5941a03a97e86eec4a6c4169092d064722c9d6714fa4ed84147d25307338c3da086687a03dd02cfdb56f8c0c7142032eff73674b1e5590eb463405b901be7ce5ca89ab86a0ec3d2ae4ad26e3e7ec11e3a9a9e247049cb417392d165a86a9d2a0a21b21755da0dc095aff6e8ca9a3bb742b910077283914484cc96a1a9536407653a64a870feea0b44d66cb14c00fe4923a8175d254d3148e7e3291a4c666c46848814678e32f4fa0370b6fe91f198215188021ebfd613fd854db4e1a70db550b2865b169217d29c2a03540454e951734746c02def599ab9b3bdd171de847418360024aad06b47fbb0aa03e2a114070d1c2e40509a607f397a19cbe10cafbdde1b268ca0b9a2e9a6a06a2a09895fbc227c026df0294c8c40d3ace544d9941871e9056e8f5848719eea2d120a08a3a903a918394e636f7f455386aed65c871447069199bc2f3379e86848dc280a0b946076d77c0197c1e4411a1255e80ea6a378d9de26797a4f770e22ef4ee414da0eb1127bd741ea202b9f1aeea078f0266be3749b7e0ff4b514dd85b249197209ca00e618170c166e68fab3a858bd2a14276d035721b6d7e961ee7fd7ff6a0c6f73c800000000000000000000000000000000000000000000000000000000000000000000000000000000000000214f90211a015cedad3ea2a5d2524f3cb62688bbd2b7d03b4ee15fe4f4c2220643bc8368886a0daf95ecd78efe9d1d66f3f1f7877406a9708c585bda8533dbaa8af14c214e3dba04d30ab4cf85c60479ac75679c9c3a1af51233d082cb8c112e53acbc1b32c4d21a0b88cbbd015422511ba3c9977ca62bdaa4de6c437f85ee542d8ce60870f0b3310a09cc81c0c49f1e97836043841f66d995b3ec8eb0991ec4d13c3e8e7a6de2d5280a05298b0ed3effa08061f8d787bed5dbcd322a7ffb96febed87eeecc99eadbb149a0dc7808f73b0a60910182206616646ca1cec8859008ea83fc1c0ae9e21c4d8934a0c9dd7f0c9f521215c3671efcee4a1a715009cc02315248751fa69e9a426b2817a073550200a586f014d673aa7a169a730ca388f735a1b2ffbc5982a159f5ede39ea0c55d268773253712d4f0e95c1046f5a1f296279ad9ae6ec917791887f10bb5d9a05e382eabc149b521938225736bc08efff05c4e378050e4dd4ed8efd6c971aa67a025400f8f7e4ef6aac40cbe0dc07041caee0eee3f66eb316f0741ca4c2b0e7714a00c6c6aa5aab3980ddcd91eef2c69308279499dae59bdf0b71b09f93b97252c59a041e545ab62d4462f46be9b9f7d2a978804d9c6bcc5475353096bc3aeabb0ffd4a087403516ecbedb6ad6365a681f00eb58fdbbfc5a2d64c9697760ac650a09224ba0dde62d73fe4ff6b423eea6bda3b71e733f174fb22d39c8228549ebcbf1cf18688000000000000000000000000000000000000000000000000000000000000000000000000000000000000001f4f901f1a010fcc45e1be5615b25b701487069cfa0b169b860d95c1ffaf0eeb551a8afe1e7a02baad1b9232dde637ae60c9fe06335c875de47fda09301be8012fbc4d6706a79a02e213bf6d8c9b6d175231002b6700f25ef7728b26729c725c15e9b9958562f30a0b018c33a4937d5c35280a66fd51cf939fdcbd1f61f8ee4438fa7b8abb42c0a95a07a6db750ac23dbca4982bf652769542e51d2afc0c081e0af788617af460dadcaa03f9b829c29dd335a8d8d07b516dc889f45ae39978d48d44c3155e6aa3fd8adafa0eb60743c932cd2945ba5d4d4e1121b26907c6792fa1f9916efe9b79d57b1f872a0f6e4aa7da476502fd1e47faef0409648f48aba6189a9158ac924a35a173c3b62a091a0b781627d66f39932ea0d6d56f6cc1f56961e849ecfa2a8d657d58c5f2bf5a0f78cc4c4b4f677d602e9a5de9634e2b27f3dae1811dc3c47f939663c5b3c6be5a0e9737f9b263462ccfd2b33d0a8f203d1e21f8a40dacfc15973fa2729e22fdd23a08da62ccfeb14147168e4183d11eb36b837705f55a8371f29eb86067b6a0b05d3a023d1d37c01ef868443b54b9a14cb0536b83a3c0fbb8dae188dfcc52b28947869a02d9f374dda2b91889938273be7c216d0ab28ec687553ac4e35ca9d577b7d17c580a06b83adefcc06d8a20608b47e4680878daae1b50fd1db552862f847a0ed587e99800000000000000000000000000000000000000000000000000000000000000000000000000000000000000069f8679e3245dd7ef6904143a2e2afe327e466d8c05c651a2e33fe746d8fbac6ad95b846f8440180a05eed55cf975e2e2257fe8527e028679782c5b34dddeb0b644227d786fd79b0aca0ed4dac3a97cd55d7d89bb750f0b138f949787bafb76f9a2902e57f29742b4fb8000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000000300000000000000000000000000000000000000000000000000000000000000600000000000000000000000000000000000000000000000000000000000000180000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000000f3f8f180a06b106f66e8e3522f3d9f4b72b56d2303f9a03ba0e96ee652545da63afc38f10ba0a6da6302e11f3d5045774729a336b7f05221779cd6ef9c7e74ee7e5906c51c9280808080a0d23f9adb4bcb42ab7f8bf9ead851ea7a9d0c16a0efc5a3b94474222d69c3248880a08d23f83c8ee2118facd295df2cf546b3b6d5b4561a77373c312f095e928f457880a0634c9f1a3d2fb9b7e7ce3d0155401f6daa67535acb12ded6834a2ffef6ab106580a0728df5a626df9c9a2eeace98dcea304405f92841252bee0eb66b74422687f1f580a0b954e5d774806d3a050295a2451ca8b6611e5d31fbc482433dacfe0e1d2f3d2580000000000000000000000000000000000000000000000000000000000000000000000000000000000000000053f851808080808080808080a05562d4c69fcaf7778df616351f2996b02b6b9b11df787de5f96da97af2968a738080a0fe7d9a8a67908cb0be5a316771b51572303e2ce6d98418c7ee5aa3ed7cbbefb080808080000000000000000000000000000000000000000000000000000000000000000000000000000000000000000023e2a0200decd9548b62a8d60345a988386fc84ba6bc95484008f6362f93160ef3e5632a0000000000000000000000000000000000000000000000000000000000"

const p = {
    stateTrieWitness: [
        '0xf90211a0ecbb5930d0d44a48876bc9f92d5f16b470858adacfefb31bf241861ef82ef365a05dd3908206bdc8321a8f5aebbf3a2745b8c528eedab13f6983d38743feb4b790a0a1adb1d322267351fc37499c5b057f76a0622969d5c542bb873df2f06a69c12fa05385b6566b6b1e6a3128eea7c09121cc50d364e4c22c6a8a3a7629ae10d05168a07a02845466ee54b429767f479ee0b53184931f07b4d4ce2dc2414d718dc4e24fa08eb46baacdf11591d3fb014f6230b26bb34b95fc3341b8ca4d350e7f9ea635c6a004f323a1c155647a17177821557bc9876a5025bb6c4cf24568e554573628d455a06b2db470cb6422aa00a4052882a1e58c57f6fc02e8e2c7595ecbfb460190211ea08b6ac77a8d9424d56bdee393bd9eda2d9291bc9e70cab606e02d71e8e4574719a048d22ea0362f52a6f6a50b9f0061513017fe785496382b386fc90a80d459df58a0c0b6b51c6f35615a5ef75651dad24dac9e699c80846380f6e21e48e75d975eb6a0d94c2d494ee20548f94eb5a183d393236a04820b46c1927da5e79f14c9608051a0fb3908d2b05acbf87d5b6dbb4e514ba28fc74826ec01770ab611a6d5b632c9b1a0d3d24aff6ae8582fe0333196ebb5cdba6c7930abda3057af8bbe781c2a5f4edfa01e02189b43b74ff71e69cd1ca81385c071ae7caaef53ab69bad97b85ff07a286a0b5aff837cc8b99fa249712c294682976b220d2124125828a0b0a39bcbaa95a6b80',
        '0xf90211a06bfc6112fb2883d0436836248c9f4f5c5db650f855302860605fe75c9f0c576da0f5bdabdb6c201b8d76d34e0db8b37942aa74e20e20a1ef3f7c8a6110ca085a47a0327122b35929022c10e99ebe6ae898c3c467aaa94b4a412114a01d763aeb8a43a0309dced8e39f6629374db60e676d770402d67268983f2a99928229b193ec9990a0c77809805f1ddc8b72c511bd815537a4c91353bfba79520b7e25d8a0b2a3bfdaa0575afb490f48bb7e2a13f0ba7ef479535fb3f38bc8243b24d82ceaf8e5c7d347a03079ffc2dd4d07e23208c3b82b9bf07fa0dcfb2c891bbea7fd2c7ba0b0aae0eba04358d6a31475be7c04b22e4b4adf9c619c787d04c2cb03045901443b8a81f3c9a0f2a2cdbfb7a0968d0b746312fa43d18406a7fdded3a2a342ba38936512c5d0e4a0640ebcb60df8bd6f92bc17058e7832507a8c23bf0f4eb003d7b29fc438ec0c6da0393953ea1f65571d25d5bb6a2c334c834a99f29e0392db2af8edee82d470b001a0133d400c51da299c5ef4987455429b5f2ff64827212fa310cd3cdecf8ad8011ea07c8f8a8556d88b38a77131b6031bfa534a5edaa6dfcaef9f87adcf83e7f8ddaba0b99b0e42c4e0b5bde981ab210d6d837574ae23cb5c7056b8aa5aa42cbe2d1c5ba0f8c8efe9f6d5f92d47bfbdd572e914b13eff156753135061d73a243455028099a06c46452fffcf604574c452dd4d3685e58fb8b6ee2bf2a9914b3c406e73d332d580',
        '0xf90211a0b2fbcf2edff8a96dd14ceaad33638dc75a25dc076af91a1560fc241699a56ea6a0fda81ec1dbc32b3ae5d2c10eba02eaf359ab595b05937cd7ec8818bb7a6b5978a037b35d50b93c3f9463523ace45fb1c6407cb4780cbc2cd4a0ea46001a9456f6ca03a97e86eec4a6c4169092d064722c9d6714fa4ed84147d25307338c3da086687a07d0cdfc2eb7fda8d62d4925f54254ea5a87b1251ab32ea8dfdfacc98bcf9af7ea0ec3d2ae4ad26e3e7ec11e3a9a9e247049cb417392d165a86a9d2a0a21b21755da0dc095aff6e8ca9a3bb742b910077283914484cc96a1a9536407653a64a870feea039766bc9e47cd08ebd60ff1d959a683ff2b85f920ad5c0e86f558a13ae6172e2a0d7fbe3279aba6f18de6def2e63cc179c825c08a62dbd0ea2e810c2c139824e7ca03540454e951734746c02def599ab9b3bdd171de847418360024aad06b47fbb0aa03e2a114070d1c2e40509a607f397a19cbe10cafbdde1b268ca0b9a2e9a6a06a2a09895fbc227c026df0294c8c40d3ace544d9941871e9056e8f5848719eea2d120a08a3a903a918394e636f7f455386aed65c871447069199bc2f3379e86848dc280a022f6c7f923798d45e158df64560f49e8d392a6d592b1a225108b6fc062a74acaa009e5cc3419f31c72e01e6ee35504faac4a7a70d77877172bc0cded5cd8e2edc9a06fe35e0a65ec911bb82a17f16a469d797932978e67acc7e1165323937eeb5e1380',
        '0xf90211a015cedad3ea2a5d2524f3cb62688bbd2b7d03b4ee15fe4f4c2220643bc8368886a0daf95ecd78efe9d1d66f3f1f7877406a9708c585bda8533dbaa8af14c214e3dba04d30ab4cf85c60479ac75679c9c3a1af51233d082cb8c112e53acbc1b32c4d21a0b88cbbd015422511ba3c9977ca62bdaa4de6c437f85ee542d8ce60870f0b3310a09cc81c0c49f1e97836043841f66d995b3ec8eb0991ec4d13c3e8e7a6de2d5280a05298b0ed3effa08061f8d787bed5dbcd322a7ffb96febed87eeecc99eadbb149a0dc7808f73b0a60910182206616646ca1cec8859008ea83fc1c0ae9e21c4d8934a0c9dd7f0c9f521215c3671efcee4a1a715009cc02315248751fa69e9a426b2817a073550200a586f014d673aa7a169a730ca388f735a1b2ffbc5982a159f5ede39ea0c55d268773253712d4f0e95c1046f5a1f296279ad9ae6ec917791887f10bb5d9a05e382eabc149b521938225736bc08efff05c4e378050e4dd4ed8efd6c971aa67a025400f8f7e4ef6aac40cbe0dc07041caee0eee3f66eb316f0741ca4c2b0e7714a00c6c6aa5aab3980ddcd91eef2c69308279499dae59bdf0b71b09f93b97252c59a041e545ab62d4462f46be9b9f7d2a978804d9c6bcc5475353096bc3aeabb0ffd4a087403516ecbedb6ad6365a681f00eb58fdbbfc5a2d64c9697760ac650a09224ba0dde62d73fe4ff6b423eea6bda3b71e733f174fb22d39c8228549ebcbf1cf186880',
        '0xf901f1a010fcc45e1be5615b25b701487069cfa0b169b860d95c1ffaf0eeb551a8afe1e7a02baad1b9232dde637ae60c9fe06335c875de47fda09301be8012fbc4d6706a79a02e213bf6d8c9b6d175231002b6700f25ef7728b26729c725c15e9b9958562f30a0b018c33a4937d5c35280a66fd51cf939fdcbd1f61f8ee4438fa7b8abb42c0a95a07a6db750ac23dbca4982bf652769542e51d2afc0c081e0af788617af460dadcaa03f9b829c29dd335a8d8d07b516dc889f45ae39978d48d44c3155e6aa3fd8adafa0eb60743c932cd2945ba5d4d4e1121b26907c6792fa1f9916efe9b79d57b1f872a0f6e4aa7da476502fd1e47faef0409648f48aba6189a9158ac924a35a173c3b62a091a0b781627d66f39932ea0d6d56f6cc1f56961e849ecfa2a8d657d58c5f2bf5a0f78cc4c4b4f677d602e9a5de9634e2b27f3dae1811dc3c47f939663c5b3c6be5a0e9737f9b263462ccfd2b33d0a8f203d1e21f8a40dacfc15973fa2729e22fdd23a08da62ccfeb14147168e4183d11eb36b837705f55a8371f29eb86067b6a0b05d3a023d1d37c01ef868443b54b9a14cb0536b83a3c0fbb8dae188dfcc52b28947869a02d9f374dda2b91889938273be7c216d0ab28ec687553ac4e35ca9d577b7d17c580a06b83adefcc06d8a20608b47e4680878daae1b50fd1db552862f847a0ed587e9980',
        '0xf8679e3245dd7ef6904143a2e2afe327e466d8c05c651a2e33fe746d8fbac6ad95b846f8440180a05eed55cf975e2e2257fe8527e028679782c5b34dddeb0b644227d786fd79b0aca0ed4dac3a97cd55d7d89bb750f0b138f949787bafb76f9a2902e57f29742b4fb8'
    ],
    storageProofs: [
        [
            '0xf8f180a06b106f66e8e3522f3d9f4b72b56d2303f9a03ba0e96ee652545da63afc38f10ba0a6da6302e11f3d5045774729a336b7f05221779cd6ef9c7e74ee7e5906c51c9280808080a0d23f9adb4bcb42ab7f8bf9ead851ea7a9d0c16a0efc5a3b94474222d69c3248880a08d23f83c8ee2118facd295df2cf546b3b6d5b4561a77373c312f095e928f457880a0634c9f1a3d2fb9b7e7ce3d0155401f6daa67535acb12ded6834a2ffef6ab106580a0728df5a626df9c9a2eeace98dcea304405f92841252bee0eb66b74422687f1f580a0b954e5d774806d3a050295a2451ca8b6611e5d31fbc482433dacfe0e1d2f3d2580',
            '0xf851808080808080808080a05562d4c69fcaf7778df616351f2996b02b6b9b11df787de5f96da97af2968a738080a0fe7d9a8a67908cb0be5a316771b51572303e2ce6d98418c7ee5aa3ed7cbbefb080808080',
            '0xe2a0200decd9548b62a8d60345a988386fc84ba6bc95484008f6362f93160ef3e5632a'
        ],
        [
            '0xf8f180a06b106f66e8e3522f3d9f4b72b56d2303f9a03ba0e96ee652545da63afc38f10ba0a6da6302e11f3d5045774729a336b7f05221779cd6ef9c7e74ee7e5906c51c9280808080a0d23f9adb4bcb42ab7f8bf9ead851ea7a9d0c16a0efc5a3b94474222d69c3248880a08d23f83c8ee2118facd295df2cf546b3b6d5b4561a77373c312f095e928f457880a0634c9f1a3d2fb9b7e7ce3d0155401f6daa67535acb12ded6834a2ffef6ab106580a0728df5a626df9c9a2eeace98dcea304405f92841252bee0eb66b74422687f1f580a0b954e5d774806d3a050295a2451ca8b6611e5d31fbc482433dacfe0e1d2f3d2580',
            '0xf843a0310e2d527612073b26eecdfd717e6a320cf44b4afac2b0732d9fcbe2b7fa0cf6a1a05361746f7368690000000000000000000000000000000000000000000000000e'
        ]
    ],
    stateRoot: '0x5eed55cf975e2e2257fe8527e028679782c5b34dddeb0b644227d786fd79b0ac'
}

describe("Arbi Verifier", () => {

    it.only("test", async () => {
        /**
         * Prepate mock inbox
         */
        const outboxF = await hardhat.ethers.getContractFactory("MockOutbox")
        const mockOutbox = await outboxF.deploy()



        await mockOutbox.pushRoot(
            "0x47ee108ea84e6f85c2749e942ee3d5d6a2cc5ef81f3b5c651c0f3c1b472bd645",
            "0x913ac55af774e541d9c787428951598010fc41cacf2b9e97a924c7eff7d10fc5",
        )

        /**
         * Deploy verifier
         */

        const f = await hardhat.ethers.getContractFactory("ArbVerifier")
        const arbiVerfifier = await f.deploy(await mockOutbox.getAddress(), ["d"])

        /**
         * Deploy MockTestL1
         */

        const testL2OnArbi = "0x2161d46ad2b7dd9c9f58b8be0609198899fb431d"

        const fMockTest = await hardhat.ethers.getContractFactory("MockTestL1")
        const mockTestL1 = await fMockTest.deploy(await arbiVerfifier.getAddress(), testL2OnArbi)

        const req = await mockTestL1.getLatest()

        const [, , commands, , constants] = req

        console.log(req)





        const res = await arbiVerfifier.getStorageValues(testL2OnArbi, [...commands], [...constants], proof)
        console.log(res)
    })
})